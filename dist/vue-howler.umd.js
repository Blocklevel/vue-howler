/*
 * vue-howler v0.3.3
 * (c) 2017 Mick Dekkers
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("howler"),require("lodash")):"function"==typeof define&&define.amd?define(["howler","lodash"],e):t.VueHowler=e(t.howler,t.lodash)}(this,function(t,e){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return{props:{sources:{type:Array,required:!0,validator:function(t){return t.every(function(t){return"string"==typeof t&&t.length>0})}},autoplay:{type:Boolean,default:!1},loop:{type:Boolean,default:!1},preload:{type:Boolean,default:!0},html5:{type:Boolean,default:!1}},data:function(){var t=this;return{_howl:null,playing:!1,muted:!1,volume:1,rate:1,seek:0,duration:0,_polls:{seek:{id:null,interval:250,hook:function(){t.seek=t.$data._howl.seek()}}},_howlEvents:[{name:"load",hook:function(){t.duration=t.$data._howl.duration()}},"loaderror",{name:"play",hook:function(){t.playing=!0}},{name:"end",hook:function(){t.playing=!1}},{name:"pause",hook:function(){t.playing=!1}},{name:"stop",hook:function(){t.playing=!1,null!=t.$data._howl&&(t.seek=t.$data._howl.seek())}},"mute",{name:"volume",hook:function(){t.volume=t.$data._howl.volume()}},{name:"rate",hook:function(){t.rate=t.$data._howl.rate()}},{name:"seek",hook:function(){t.seek=t.$data._howl.seek()}},"fade"]}},computed:{progress:function(){return 0===this.duration?0:this.seek/this.duration}},created:function(){this._initialize()},beforeDestroy:function(){this._cleanup()},watch:{playing:function(t){this.seek=this.$data._howl.seek(),t?this.$data._polls.seek.id=setInterval(this.$data._polls.seek.hook,this.$data._polls.seek.interval):clearInterval(this.$data._polls.seek.id)},sources:function(t){this._reinitialize()}},methods:{_reinitialize:function(){this._cleanup(!1),this._initialize()},_initialize:function(){var o=this;this.$data._howl=new t.Howl({src:this.sources,volume:this.volume,rate:this.rate,mute:this.muted,autoplay:this.autoplay,loop:this.loop,preload:this.preload,html5:this.html5});var n=this.$data._howl.duration();this.duration=n,n>0&&this.$emit("load"),this.$data._howlEvents=this.$data._howlEvents.map(function(t){"string"==typeof t&&(t={name:t});var n=function(e,n){"function"==typeof t.hook&&t.hook(e,n),o.$emit(t.name,e,n)};return o.$data._howl.on(t.name,n),e.assign({},t,{handler:n})})},_cleanup:function(){var t=this,o=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.stop(),e.values(this.$data._polls).forEach(function(t){null!=t.id&&clearInterval(t.id)}),this.$data._howlEvents.map(function(o){if(o.handler){t.$data._howl.off(o.name,o.handler);var n=e.assign({},o);return delete n.handler,n}return o}),this.$data._howl=null,this.duration=0,o&&(this.muted=!1,this.volume=1,this.rate=1)},play:function(){this.playing||this.$data._howl.play()},pause:function(){this.playing&&this.$data._howl.pause()},togglePlayback:function(){this.playing?this.$data._howl.pause():this.$data._howl.play()},stop:function(){this.$data._howl.stop()},mute:function(){this.$data._howl.mute(!0),this.muted=!0},unmute:function(){this.$data._howl.mute(!1),this.muted=!1},toggleMute:function(){this.$data._howl.mute(!this.muted),this.muted=!this.muted},setVolume:function(t){if("number"!=typeof t)throw new Error("volume must be a number, got a "+(void 0===t?"undefined":o(t))+" instead");this.$data._howl.volume(e.clamp(t,0,1))},setRate:function(t){if("number"!=typeof t)throw new Error("rate must be a number, got a "+(void 0===t?"undefined":o(t))+" instead");this.$data._howl.rate(e.clamp(t,.5,4))},setSeek:function(t){if("number"!=typeof t)throw new Error("seek must be a number, got a "+(void 0===t?"undefined":o(t))+" instead");this.$data._howl.seek(e.clamp(t,0,this.duration))},setProgress:function(t){if("number"!=typeof t)throw new Error("progress must be a number, got a "+(void 0===t?"undefined":o(t))+" instead");this.setSeek(e.clamp(t,0,1)*this.duration)}}}});
